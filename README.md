# RN 0.84 Codegen Breaking Change — `includesGeneratedCode: true` + `getConstants()`

## Bug Summary

Libraries using `includesGeneratedCode: true` that pre-generated their codegen output with React Native < 0.84 fail to compile on iOS when consumed by an RN 0.84 app.

**Error:**

```
error: no type named 'ResultT' in 'JS::NativeMyTurboModule::Constants::Builder'
```

## Root Cause

PR [#54919](https://github.com/facebook/react-native/pull/54919) ("Fix backwards-compat for ModuleConstants<::Builder>"), merged Dec 17 2025 and shipped in RN 0.84.0, added a `ResultT` type alias requirement to `Constants::Builder` structs. The updated `RCTTypedModuleConstants.h` resolves the constants type via `Builder::ResultT`, but libraries with pre-shipped codegen (generated by older RN versions) don't have this alias.

## How to Reproduce

This repo contains:

- **`packages/my-turbo-module/`** — A minimal TurboModule library with:
  - `getConstants()` in its spec
  - `includesGeneratedCode: true` in `codegenConfig`
  - Pre-generated iOS codegen output from `@react-native/codegen` 0.77.0 (intentionally missing `using ResultT = Constants;`)

- **`ReproducerApp/`** — An RN 0.84.0 app that depends on the library

### Steps

1. `cd ReproducerApp && npm install --install-links`
2. `cd ios && pod install`
3. `npx react-native build-ios`
4. **Observe:** iOS build fails with `no type named 'ResultT' in 'JS::NativeMyTurboModule::Constants::Builder'`

## The Catch-22

Regenerating codegen with `@react-native/codegen@0.84.0` produces output with completely different JSI structure (`methodMap_` pattern instead of `Delegate` class, `ModuleConstants<Constants>` instead of `ModuleConstants<Builder>`) that is **incompatible with older RN versions**. There is no single codegen version that produces output working across both pre-0.84 and 0.84+ apps.

## Documentation Promise

The [codegen-cli documentation](https://reactnative.dev/docs/the-new-architecture/codegen-cli#including-generated-code-into-libraries) states:

> No need to worry about Codegen version mismatch between what is used by the app, and what was used during library development.

The `ResultT` change in 0.84 breaks this contract.
